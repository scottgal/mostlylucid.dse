name: "NMT Translation Service"
type: "openapi"
description: "Neural Machine Translation service for translating text between languages using GET requests. VERY FAST but can be inaccurate - MUST validate output with translation_quality_checker for repeated characters and garbled text. Uses ISO 639 two-letter language codes (e.g., 'en', 'es', 'fr', 'de'). Get supported languages from GET /languages endpoint. API returns 'translations' array. Uses OpenAPI spec from http://localhost:8000/openapi.json."
cost_tier: "low"
speed_tier: "very-fast"
quality_tier: "good"
max_output_length: "long"
openapi:
  spec_url: "http://localhost:8000/openapi.json"
  base_url: "http://localhost:8000"
code_template: |
  # Example: How to use the NMT Translation Service
  # IMPORTANT: Uses ISO 639 two-letter language codes
  import requests
  import json

  def get_supported_languages():
      """
      Get list of supported language codes from the API.

      Returns:
          List of ISO 639 two-letter language codes
      """
      url = "http://localhost:8000/languages"
      response = requests.get(url)
      response.raise_for_status()
      return response.json()

  def translate_text(text, source_lang="en", target_lang="de", beam_size=5, perform_sentence_splitting=True):
      """
      Translate text using the NMT service.

      Args:
          text: Text to translate (string)
          source_lang: ISO 639 two-letter source language code (e.g., 'en', 'es', 'fr', 'de')
          target_lang: ISO 639 two-letter target language code
          beam_size: Beam search size for translation quality (default: 5)
          perform_sentence_splitting: Split into sentences before translation (default: True)

      Returns:
          Translated text (string)

      Response Format:
          The API returns:
          {
            "translations": ["Guten Tag."],
            "pivot_path": "de->en->de",
            "error": null
          }

      Note:
          - API uses GET requests with query parameters
          - Response has "translations" array
          - Use get_supported_languages() to see all available language codes
      """
      url = "http://localhost:8000/translate"

      params = {
          "text": text,
          "source_lang": source_lang,
          "target_lang": target_lang,
          "beam_size": beam_size,
          "perform_sentence_splitting": "true" if perform_sentence_splitting else "false"
      }

      response = requests.get(url, params=params)
      response.raise_for_status()

      result = response.json()

      # Check for errors
      if result.get("error"):
          raise Exception(f"Translation error: {result['error']}")

      # Response has "translations" array
      translations = result.get("translations", [])

      if translations:
          return translations[0]  # Return first translation
      return ""  # Return empty string if no translation

  # Usage examples:
  # Get supported languages first
  # languages = get_supported_languages()
  # print(f"Supported languages: {languages}")

  # Example 1: Translate single text
  # translated = translate_text("hello", source_lang="en", target_lang="de")
  # print(translated)  # Output: "Guten Tag."

  # Example 2: Translate with custom beam size
  # translated = translate_text("Hello, world!", source_lang="en", target_lang="es", beam_size=10)
  # print(translated)  # Output: "Hola, mundo!"

  # Example 3: Translate without sentence splitting
  # translated = translate_text("Hello friend", source_lang="en", target_lang="fr", perform_sentence_splitting=False)
  # print(translated)  # Output: "Bonjour ami"
tags: ["translation", "nmt", "neural", "languages", "openapi", "api"]
