name: "Basic Calculator"
type: "executable"
version: "1.0.1"
description: "Fast arithmetic operations (add, subtract, multiply, divide, power, modulo). Direct Python execution - no LLM needed. Use for simple math."

# Performance metadata (NEW - was missing)
cost_tier: "free"
speed_tier: "very-fast"
quality_tier: "excellent"
max_output_length: "short"
priority: 150

executable:
  command: "python"
  args: ["{tool_dir}/basic_calculator.py"]
  # Extracted inline Python to separate file for better maintainability

# Resource constraints (NEW)
constraints:
  timeout_ms: 5000
  max_memory_mb: 64
  max_cpu_percent: 20

# Structured input schema (IMPROVED - was string-based)
input_schema:
  type: object
  properties:
    operation:
      type: string
      description: "Arithmetic operation to perform"
      enum: ["add", "subtract", "multiply", "divide", "power", "modulo"]
      default: "add"
    a:
      type: number
      description: "First operand"
      default: 0
    b:
      type: number
      description: "Second operand"
      default: 0
  required: []

# Structured output schema (IMPROVED)
output_schema:
  type: object
  properties:
    success:
      type: boolean
      description: "Whether operation succeeded"
    result:
      type: object
      properties:
        result:
          type: number
          description: "Calculation result"
        operation:
          type: string
          description: "Operation performed"
    error:
      type: string
      description: "Error message if failed"

tags: ["math", "arithmetic", "calculator", "fast", "deterministic"]

# Examples (EXPANDED)
examples:
  - input: {"operation": "add", "a": 5, "b": 3}
    output: {"success": true, "result": {"result": 8, "operation": "add"}}
  - input: {"operation": "multiply", "a": 7, "b": 6}
    output: {"success": true, "result": {"result": 42, "operation": "multiply"}}
  - input: {"operation": "divide", "a": 10, "b": 2}
    output: {"success": true, "result": {"result": 5.0, "operation": "divide"}}
  - input: {"operation": "divide", "a": 10, "b": 0}
    output: {"success": true, "result": {"result": .inf, "operation": "divide"}}
  - input: {"operation": "power", "a": 2, "b": 8}
    output: {"success": true, "result": {"result": 256, "operation": "power"}}

# Usage documentation (NEW)
usage_notes: |
  ## Overview
  Provides fast arithmetic operations without LLM overhead.
  Ideal for simple calculations in workflows.

  ## Operations
  - **add**: a + b
  - **subtract**: a - b
  - **multiply**: a * b
  - **divide**: a / b (returns Infinity if b=0)
  - **power**: a ** b
  - **modulo**: a % b (returns 0 if b=0)

  ## Performance
  - Execution time: < 100ms
  - No external dependencies
  - No LLM calls
  - Deterministic results

  ## Error Handling
  - Invalid operation: Returns error with list of valid operations
  - Non-numeric inputs: Returns error with type information
  - Division by zero: Returns Infinity (not error)
  - Modulo by zero: Returns 0 (not error)
