<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Evolver - Interactive Workflow Builder</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üß¨</div>
                    <h1>Code Evolver</h1>
                    <span class="beta-badge">BETA</span>
                </div>
                <div class="header-status">
                    <div class="status-indicator" id="connectionStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">Connecting...</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Panel -->
            <div class="chat-panel">
                <div class="chat-header">
                    <h2>AI Chat</h2>
                    <p class="chat-subtitle">Ask me anything about your code workflow</p>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="welcome-icon">üëã</div>
                        <h3>Welcome to Code Evolver!</h3>
                        <p>I'm your AI assistant for building dynamic workflows. Tell me what you'd like to create, and I'll assemble the perfect tools and workflow for you.</p>
                        <div class="example-prompts">
                            <p class="example-label">Try asking:</p>
                            <button class="example-btn" onclick="sendExample('Create a REST API client for GitHub')">Create a REST API client for GitHub</button>
                            <button class="example-btn" onclick="sendExample('Generate test data for a user database')">Generate test data for a user database</button>
                            <button class="example-btn" onclick="sendExample('Build a workflow to analyze Python code quality')">Build a workflow to analyze Python code quality</button>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <form id="chatForm" class="chat-input-form">
                        <textarea
                            id="messageInput"
                            class="chat-input"
                            placeholder="Describe your workflow or ask a question..."
                            rows="1"
                        ></textarea>
                        <button type="submit" class="send-button" id="sendButton">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Visualization Panel -->
            <div class="viz-panel">
                <div class="viz-header">
                    <h2>Workflow Visualization</h2>
                    <div class="viz-controls">
                        <button class="viz-control-btn" id="resetVizBtn" title="Reset View">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 4V10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M20.49 9C19.9828 7.56678 19.1209 6.28537 17.9845 5.27542C16.8482 4.26546 15.4745 3.55975 13.9917 3.22426C12.5089 2.88877 10.9652 2.93434 9.50481 3.35677C8.04437 3.77921 6.71475 4.56471 5.64 5.64L1 10M23 14L18.36 18.36C17.2853 19.4353 15.9556 20.2208 14.4952 20.6432C13.0348 21.0657 11.4911 21.1112 10.0083 20.7757C8.52547 20.4403 7.1518 19.7345 6.01547 18.7246C4.87913 17.7146 4.01717 16.4332 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="viz-content">
                    <!-- Workflow Progress -->
                    <div class="workflow-progress" id="workflowProgress" style="display: none;">
                        <div class="progress-header">
                            <span class="progress-label">Workflow Progress</span>
                            <span class="progress-percentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-status" id="progressStatus">Initializing...</div>
                    </div>

                    <!-- Tools Discovery -->
                    <div class="tools-discovery" id="toolsDiscovery">
                        <h3 class="section-title">Tools Discovery</h3>
                        <div class="tools-grid" id="toolsGrid">
                            <div class="empty-state">
                                <div class="empty-icon">üîß</div>
                                <p>Waiting for request...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Workflow Steps -->
                    <div class="workflow-steps" id="workflowSteps">
                        <h3 class="section-title">Workflow Assembly</h3>
                        <div class="steps-container" id="stepsContainer">
                            <div class="empty-state">
                                <div class="empty-icon">‚öôÔ∏è</div>
                                <p>No workflow steps yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
